import{s as L,f as w,l as X,g as M,h as y,m as Y,d,F as B,G as ne,i as C,x as E,H as j,y as q,n as Z,u as D,J as x,z as re,M as ae,o as O,L as se,a as P,e as A,r as le,c as T,j as R,I as F}from"../chunks/scheduler.c4785dc3.js";import{S as V,i as z,b as G,d as I,m as b,a as g,g as ee,t as h,c as te,e as k}from"../chunks/index.42f95a44.js";import{e as N,b as oe,V as ie,C as ce,R as fe,r as ue,f as me,M as _e,L as pe,a as ge,P as de}from"../chunks/Modal.6c76a5fc.js";import{b as he,c as $e,d as ve}from"../chunks/movies.87fb9d4d.js";import{p as H}from"../chunks/prioritizeimages.97612009.js";function J(i,e,n){const t=i.slice();return t[7]=e[n],t}function K(i){let e,n=i[7].name+"",t,o;return{c(){e=w("option"),t=X(n),this.h()},l(s){e=M(s,"OPTION",{});var f=y(e);t=Y(f,n),f.forEach(d),this.h()},h(){e.__value=o=i[7].id,B(e,e.__value)},m(s,f){C(s,e,f),E(e,t)},p(s,f){f&2&&n!==(n=s[7].name+"")&&Z(t,n),f&2&&o!==(o=s[7].id)&&(e.__value=o,B(e,e.__value))},d(s){s&&d(e)}}}function Ce(i){let e,n,t,o,s,f=N(i[1]),r=[];for(let a=0;a<f.length;a+=1)r[a]=K(J(i,f,a));return{c(){e=w("select"),n=w("option"),t=X(i[2]);for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=M(a,"SELECT",{});var m=y(e);n=M(m,"OPTION",{});var l=y(n);t=Y(l,i[2]),l.forEach(d);for(let _=0;_<r.length;_+=1)r[_].l(m);m.forEach(d),this.h()},h(){n.__value="",B(n,n.__value),i[0]===void 0&&ne(()=>i[4].call(e))},m(a,m){C(a,e,m),E(e,n),E(n,t);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);j(e,i[0],!0),o||(s=[q(e,"change",i[4]),q(e,"change",i[3])],o=!0)},p(a,[m]){if(m&4&&Z(t,a[2]),m&2){f=N(a[1]);let l;for(l=0;l<f.length;l+=1){const _=J(a,f,l);r[l]?r[l].p(_,m):(r[l]=K(_),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=f.length}m&3&&j(e,a[0])},i:D,o:D,d(a){a&&d(e),x(r,a),o=!1,re(s)}}}function Ge(i,e,n){let{selectedGenre:t=10402}=e,o=[],s="Select a genre";const f=ae(),r=l=>{n(0,t=parseInt(l.target.value,10)),f("genreselect",{genreId:t})},a=l=>{const _=o.find(v=>v.id===l);return _?_.name:"Select a genre"};O(async()=>{const l={method:"GET",url:"https://api.themoviedb.org/3/genre/movie/list?language=en-US",headers:{accept:"application/json",Authorization:`Bearer ${ie}`}};try{const _=await oe.request(l);n(1,o=_.data.genres),n(2,s=a(t))}catch(_){console.error(_)}});function m(){t=se(this),n(0,t),n(1,o)}return i.$$set=l=>{"selectedGenre"in l&&n(0,t=l.selectedGenre)},[t,o,s,r,m]}class Ie extends V{constructor(e){super(),z(this,e,Ge,Ce,L,{selectedGenre:0})}}function U(i,e,n){const t=i.slice();return t[13]=e[n],t}function Q(i){let e,n;return e=new ge({props:{item:i[13]}}),e.$on("itemClick",i[5]),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){b(e,t,o),n=!0},p(t,o){const s={};o&2&&(s.item=t[13]),e.$set(s)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function be(i){let e,n,t,o=N(i[1].sort(H)),s=[];for(let r=0;r<o.length;r+=1)s[r]=Q(U(i,o,r));const f=r=>h(s[r],1,1,()=>{s[r]=null});return n=new _e({props:{selectedItem:i[2],close:i[6]}}),{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=P(),G(n.$$.fragment)},l(r){for(let a=0;a<s.length;a+=1)s[a].l(r);e=T(r),I(n.$$.fragment,r)},m(r,a){for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(r,a);C(r,e,a),b(n,r,a),t=!0},p(r,a){if(a&34){o=N(r[1].sort(H));let l;for(l=0;l<o.length;l+=1){const _=U(r,o,l);s[l]?(s[l].p(_,a),g(s[l],1)):(s[l]=Q(_),s[l].c(),g(s[l],1),s[l].m(e.parentNode,e))}for(ee(),l=o.length;l<s.length;l+=1)f(l);te()}const m={};a&4&&(m.selectedItem=r[2]),n.$set(m)},i(r){if(!t){for(let a=0;a<o.length;a+=1)g(s[a]);g(n.$$.fragment,r),t=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)h(s[a]);h(n.$$.fragment,r),t=!1},d(r){r&&d(e),x(s,r),k(n,r)}}}function W(i){let e,n;return e=new pe({props:{onClick:i[7]}}),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){b(e,t,o),n=!0},p:D,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ke(i){let e,n,t="Movie Genres",o,s,f,r,a,m,l,_,v,$;f=new Ie({}),f.$on("genreselect",i[3]),a=new ce({props:{$$slots:{default:[be]},$$scope:{ctx:i}}}),l=new fe({});let u=i[0]&&W(i);return{c(){e=w("div"),n=w("p"),n.textContent=t,o=P(),s=w("div"),G(f.$$.fragment),r=P(),G(a.$$.fragment),m=P(),G(l.$$.fragment),_=P(),u&&u.c(),v=A(),this.h()},l(c){e=M(c,"DIV",{class:!0});var p=y(e);n=M(p,"P",{"data-svelte-h":!0}),le(n)!=="svelte-14r827w"&&(n.textContent=t),o=T(p),s=M(p,"DIV",{class:!0});var S=y(s);I(f.$$.fragment,S),S.forEach(d),p.forEach(d),r=T(c),I(a.$$.fragment,c),m=T(c),I(l.$$.fragment,c),_=T(c),u&&u.l(c),v=A(),this.h()},h(){R(s,"class","input-and-button"),R(e,"class","page-header-container")},m(c,p){C(c,e,p),E(e,n),E(e,o),E(e,s),b(f,s,null),C(c,r,p),b(a,c,p),C(c,m,p),b(l,c,p),C(c,_,p),u&&u.m(c,p),C(c,v,p),$=!0},p(c,[p]){const S={};p&65542&&(S.$$scope={dirty:p,ctx:c}),a.$set(S),c[0]?u?(u.p(c,p),p&1&&g(u,1)):(u=W(c),u.c(),g(u,1),u.m(v.parentNode,v)):u&&(ee(),h(u,1,1,()=>{u=null}),te())},i(c){$||(g(f.$$.fragment,c),g(a.$$.fragment,c),g(l.$$.fragment,c),g(u),$=!0)},o(c){h(f.$$.fragment,c),h(a.$$.fragment,c),h(l.$$.fragment,c),h(u),$=!1},d(c){c&&(d(e),d(r),d(m),d(_),d(v)),k(f),k(a,c),k(l,c),u&&u.d(c)}}}function we(i,e,n){let t=!0;O(()=>{a()});let o=[],s=1,f=10402;O(()=>{a()});const r=$=>{n(1,o=[]),s=1,f=$.detail.genreId,n(0,t=!0),a()},a=async()=>{const $=await he(f,s);n(1,o=[...o,...$.map(u=>({title:u.title,id:u.id,datatype:"movie",genre_ids:u.genre_ids,rating:u.vote_average,popularity:ue(u.popularity),backdrop_path:u.poster_path,overview:u.overview,release_date:me(u.release_date),credits:u.id}))]),$.length<60&&n(0,t=!1),s+=3};function m($){n(2,_=$.detail.item)}function l(){n(2,_=null)}let _=null;const v=()=>a();return n(0,t=F($e)<=F(ve)),[t,o,_,r,a,m,l,v]}class Me extends V{constructor(e){super(),z(this,e,we,ke,L,{})}}function Ee(i){let e,n;return e=new Me({}),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){b(e,t,o),n=!0},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Se(i){let e,n;return e=new de({props:{$$slots:{default:[Ee]},$$scope:{ctx:i}}}),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}class De extends V{constructor(e){super(),z(this,e,null,Se,L,{})}}export{De as component};
