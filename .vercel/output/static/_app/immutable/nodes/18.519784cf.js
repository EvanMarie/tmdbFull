import{s as z,f as S,l as Z,g as w,h as B,m as x,d as g,F as P,G as te,i as k,x as E,H as R,y as F,n as ee,u as O,J as ne,z as re,M as le,o as ae,L as se,a as N,e as T,r as oe,c as V,j as H}from"../chunks/scheduler.c4785dc3.js";import{S as j,i as q,b,d as I,m as C,a as d,g as D,t as h,c as L,e as G}from"../chunks/index.42f95a44.js";import{e as M,b as ie,V as ce,C as fe,R as ue,u as _e,L as me,a as pe,M as ge,o as de,P as he}from"../chunks/Modal.6c76a5fc.js";import{c as $e}from"../chunks/tvshows.3b5d958e.js";import{p as J}from"../chunks/prioritizeimages.97612009.js";function K(i,e,n){const t=i.slice();return t[7]=e[n],t}function U(i){let e,n=i[7].name+"",t,o;return{c(){e=S("option"),t=Z(n),this.h()},l(s){e=w(s,"OPTION",{});var c=B(e);t=x(c,n),c.forEach(g),this.h()},h(){e.__value=o=i[7].id,P(e,e.__value)},m(s,c){k(s,e,c),E(e,t)},p(s,c){c&2&&n!==(n=s[7].name+"")&&ee(t,n),c&2&&o!==(o=s[7].id)&&(e.__value=o,P(e,e.__value))},d(s){s&&g(e)}}}function ve(i){let e,n,t,o,s,c=M(i[1]),u=[];for(let l=0;l<c.length;l+=1)u[l]=U(K(i,c,l));return{c(){e=S("select"),n=S("option"),t=Z(i[2]);for(let l=0;l<u.length;l+=1)u[l].c();this.h()},l(l){e=w(l,"SELECT",{});var a=B(e);n=w(a,"OPTION",{});var r=B(n);t=x(r,i[2]),r.forEach(g);for(let m=0;m<u.length;m+=1)u[m].l(a);a.forEach(g),this.h()},h(){n.__value="",P(n,n.__value),i[0]===void 0&&te(()=>i[4].call(e))},m(l,a){k(l,e,a),E(e,n),E(n,t);for(let r=0;r<u.length;r+=1)u[r]&&u[r].m(e,null);R(e,i[0],!0),o||(s=[F(e,"change",i[4]),F(e,"change",i[3])],o=!0)},p(l,[a]){if(a&4&&ee(t,l[2]),a&2){c=M(l[1]);let r;for(r=0;r<c.length;r+=1){const m=K(l,c,r);u[r]?u[r].p(m,a):(u[r]=U(m),u[r].c(),u[r].m(e,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=c.length}a&3&&R(e,l[0])},i:O,o:O,d(l){l&&g(e),ne(u,l),o=!1,re(s)}}}function ke(i,e,n){let{selectedGenre:t=10765}=e,o=[],s="Select a genre";const c=le(),u=r=>{const m=o.find(v=>v.id===r);return m?m.name:"Select a genre"},l=r=>{n(0,t=parseInt(r.target.value,10)),c("genreselect",{genreId:t})};ae(async()=>{const r={method:"GET",url:"https://api.themoviedb.org/3/genre/tv/list?language=en-US",headers:{accept:"application/json",Authorization:`Bearer ${ce}`}};try{const m=await ie.request(r);n(1,o=m.data.genres),n(2,s=u(t))}catch(m){console.error(m)}});function a(){t=se(this),n(0,t),n(1,o)}return i.$$set=r=>{"selectedGenre"in r&&n(0,t=r.selectedGenre)},[t,o,s,l,a]}class be extends j{constructor(e){super(),q(this,e,ke,ve,z,{selectedGenre:0})}}function Q(i,e,n){const t=i.slice();return t[10]=e[n],t}function W(i,e){let n,t,o;return t=new pe({props:{item:e[10]}}),t.$on("itemClick",e[7]),{key:i,first:null,c(){n=T(),b(t.$$.fragment),this.h()},l(s){n=T(),I(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,c){k(s,n,c),C(t,s,c),o=!0},p(s,c){e=s;const u={};c&1&&(u.item=e[10]),t.$set(u)},i(s){o||(d(t.$$.fragment,s),o=!0)},o(s){h(t.$$.fragment,s),o=!1},d(s){s&&g(n),G(t,s)}}}function X(i){let e,n;return e=new ge({props:{selectedItem:i[4],close:i[8]}}),{c(){b(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){C(e,t,o),n=!0},p(t,o){const s={};o&16&&(s.selectedItem=t[4]),e.$set(s)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Ie(i){let e=[],n=new Map,t,o,s,c=M(i[0].sort(J));const u=a=>a[10].credits;for(let a=0;a<c.length;a+=1){let r=Q(i,c,a),m=u(r);n.set(m,e[a]=W(m,r))}let l=i[4]&&X(i);return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=N(),l&&l.c(),o=T()},l(a){for(let r=0;r<e.length;r+=1)e[r].l(a);t=V(a),l&&l.l(a),o=T()},m(a,r){for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(a,r);k(a,t,r),l&&l.m(a,r),k(a,o,r),s=!0},p(a,r){r&129&&(c=M(a[0].sort(J)),D(),e=_e(e,r,u,1,a,c,n,t.parentNode,de,W,t,Q),L()),a[4]?l?(l.p(a,r),r&16&&d(l,1)):(l=X(a),l.c(),d(l,1),l.m(o.parentNode,o)):l&&(D(),h(l,1,1,()=>{l=null}),L())},i(a){if(!s){for(let r=0;r<c.length;r+=1)d(e[r]);d(l),s=!0}},o(a){for(let r=0;r<e.length;r+=1)h(e[r]);h(l),s=!1},d(a){a&&(g(t),g(o));for(let r=0;r<e.length;r+=1)e[r].d(a);l&&l.d(a)}}}function Y(i){let e,n;return e=new me({props:{onClick:i[6]}}),{c(){b(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){C(e,t,o),n=!0},p:O,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Ce(i){let e,n,t="TV Genres",o,s,c,u,l,a,r,m,v,$;c=new be({props:{genreId:i[1]}}),c.$on("genreselect",i[5]),l=new fe({props:{$$slots:{default:[Ie]},$$scope:{ctx:i}}}),r=new ue({});let _=i[2]&&i[3]&&Y(i);return{c(){e=S("div"),n=S("p"),n.textContent=t,o=N(),s=S("div"),b(c.$$.fragment),u=N(),b(l.$$.fragment),a=N(),b(r.$$.fragment),m=N(),_&&_.c(),v=T(),this.h()},l(f){e=w(f,"DIV",{class:!0});var p=B(e);n=w(p,"P",{"data-svelte-h":!0}),oe(n)!=="svelte-wf25py"&&(n.textContent=t),o=V(p),s=w(p,"DIV",{class:!0});var y=B(s);I(c.$$.fragment,y),y.forEach(g),p.forEach(g),u=V(f),I(l.$$.fragment,f),a=V(f),I(r.$$.fragment,f),m=V(f),_&&_.l(f),v=T(),this.h()},h(){H(s,"class","input-and-button"),H(e,"class","page-header-container")},m(f,p){k(f,e,p),E(e,n),E(e,o),E(e,s),C(c,s,null),k(f,u,p),C(l,f,p),k(f,a,p),C(r,f,p),k(f,m,p),_&&_.m(f,p),k(f,v,p),$=!0},p(f,[p]){const y={};p&2&&(y.genreId=f[1]),c.$set(y);const A={};p&8209&&(A.$$scope={dirty:p,ctx:f}),l.$set(A),f[2]&&f[3]?_?(_.p(f,p),p&12&&d(_,1)):(_=Y(f),_.c(),d(_,1),_.m(v.parentNode,v)):_&&(D(),h(_,1,1,()=>{_=null}),L())},i(f){$||(d(c.$$.fragment,f),d(l.$$.fragment,f),d(r.$$.fragment,f),d(_),$=!0)},o(f){h(c.$$.fragment,f),h(l.$$.fragment,f),h(r.$$.fragment,f),h(_),$=!1},d(f){f&&(g(e),g(u),g(a),g(m),g(v)),G(c),G(l,f),G(r,f),_&&_.d(f)}}}function Ge(i,e,n){let t=[],o=10765,s=1,c=!1,u=!0,l=null;const a=$=>{n(0,t=[]),s=1,n(1,o=$.detail.genreId),n(2,c=!1),n(3,u=!0),r()},r=async()=>{const $=await $e(o,s);n(0,t=[...t,...$.map(_=>({title:_.name,id:_.id,datatype:"tv",genre_ids:_.genre_ids,rating:_.vote_average,popularity:_.popularity,backdrop_path:_.poster_path,overview:_.overview,release_date:_.first_air_date,credits:_.id}))]),n(2,c=!0),$.length<60&&n(3,u=!1),s+=3};r();function m($){n(4,l=$.detail.item)}function v(){n(4,l=null)}return[t,o,c,u,l,a,r,m,v]}class Se extends j{constructor(e){super(),q(this,e,Ge,Ce,z,{})}}function we(i){let e,n;return e=new Se({}),{c(){b(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){C(e,t,o),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Ee(i){let e,n;return e=new he({props:{$$slots:{default:[we]},$$scope:{ctx:i}}}),{c(){b(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){C(e,t,o),n=!0},p(t,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}class Me extends j{constructor(e){super(),q(this,e,null,Ee,z,{})}}export{Me as component};
