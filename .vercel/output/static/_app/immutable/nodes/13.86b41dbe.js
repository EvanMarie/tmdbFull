import{s as N,f as F,a as T,e as v,g as H,r as R,c as C,j as G,i as b,d as k,E as J,o as K,J as O,u as U}from"../chunks/scheduler.c4785dc3.js";import{S as A,i as B,b as g,d,m as _,a as m,g as V,t as $,c as j,e as h}from"../chunks/index.42f95a44.js";import{b as W,V as Q,C as X,R as Y,e as D,M as Z,L as x,a as ee,P as te}from"../chunks/Modal.6c76a5fc.js";import{w as q}from"../chunks/index.09294a58.js";import{d as ae}from"../chunks/popularpeople.9f2cf5e3.js";import{p as I}from"../chunks/prioritizeimages.97612009.js";const P=q([]);let w=1;const z=q(1),y=async(c=!1)=>{if(!(!c&&w>1))for(let t=0;t<3;t++){const o={method:"GET",url:`https://api.themoviedb.org/3/trending/person/week?language=en-US&page=${w}`,headers:{accept:"application/json",Authorization:`Bearer ${Q}`}};try{const e=await W.request(o),s=await Promise.all(e.data.results.map(async r=>{const u=await ae(r.id);return{...r,actorDetail:u}}));if(P.update(r=>[...r,...s]),z.set(e.data.total_pages),w++,w>=e.data.total_pages)break}catch(e){console.error(e)}}};function L(c,t,o){const e=c.slice();return e[7]=t[o],e}function E(c){let t,o;return t=new ee({props:{item:c[7]}}),t.$on("itemClick",c[3]),{c(){g(t.$$.fragment)},l(e){d(t.$$.fragment,e)},m(e,s){_(t,e,s),o=!0},p(e,s){const r={};s&1&&(r.item=e[7]),t.$set(r)},i(e){o||(m(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function re(c){let t,o,e,s=D(c[0].sort(I)),r=[];for(let l=0;l<s.length;l+=1)r[l]=E(L(c,s,l));const u=l=>$(r[l],1,1,()=>{r[l]=null});return o=new Z({props:{selectedItem:c[1],close:c[4]}}),{c(){for(let l=0;l<r.length;l+=1)r[l].c();t=T(),g(o.$$.fragment)},l(l){for(let i=0;i<r.length;i+=1)r[i].l(l);t=C(l),d(o.$$.fragment,l)},m(l,i){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,i);b(l,t,i),_(o,l,i),e=!0},p(l,i){if(i&9){s=D(l[0].sort(I));let a;for(a=0;a<s.length;a+=1){const n=L(l,s,a);r[a]?(r[a].p(n,i),m(r[a],1)):(r[a]=E(n),r[a].c(),m(r[a],1),r[a].m(t.parentNode,t))}for(V(),a=s.length;a<r.length;a+=1)u(a);j()}const f={};i&2&&(f.selectedItem=l[1]),o.$set(f)},i(l){if(!e){for(let i=0;i<s.length;i+=1)m(r[i]);m(o.$$.fragment,l),e=!0}},o(l){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)$(r[i]);$(o.$$.fragment,l),e=!1},d(l){l&&k(t),O(r,l),h(o,l)}}}function S(c){let t,o;return t=new x({props:{onClick:c[5]}}),{c(){g(t.$$.fragment)},l(e){d(t.$$.fragment,e)},m(e,s){_(t,e,s),o=!0},p:U,i(e){o||(m(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function ne(c){let t,o="<h1>Trending People</h1>",e,s,r,u,l,i,f;s=new X({props:{$$slots:{default:[re]},$$scope:{ctx:c}}}),u=new Y({});let a=w<c[2]&&S(c);return{c(){t=F("div"),t.innerHTML=o,e=T(),g(s.$$.fragment),r=T(),g(u.$$.fragment),l=T(),a&&a.c(),i=v(),this.h()},l(n){t=H(n,"DIV",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1ldpgsk"&&(t.innerHTML=o),e=C(n),d(s.$$.fragment,n),r=C(n),d(u.$$.fragment,n),l=C(n),a&&a.l(n),i=v(),this.h()},h(){G(t,"class","page-header-container")},m(n,p){b(n,t,p),b(n,e,p),_(s,n,p),b(n,r,p),_(u,n,p),b(n,l,p),a&&a.m(n,p),b(n,i,p),f=!0},p(n,[p]){const M={};p&1027&&(M.$$scope={dirty:p,ctx:n}),s.$set(M),w<n[2]?a?(a.p(n,p),p&4&&m(a,1)):(a=S(n),a.c(),m(a,1),a.m(i.parentNode,i)):a&&(V(),$(a,1,1,()=>{a=null}),j())},i(n){f||(m(s.$$.fragment,n),m(u.$$.fragment,n),m(a),f=!0)},o(n){$(s.$$.fragment,n),$(u.$$.fragment,n),$(a),f=!1},d(n){n&&(k(t),k(e),k(r),k(l),k(i)),h(s,n),h(u,n),a&&a.d(n)}}}function oe(c,t,o){let e;J(c,z,f=>o(2,e=f));let s=[];P.subscribe(f=>{}),K(()=>{y()});function r(f){o(1,u=f.detail.item)}let u=null;function l(){o(1,u=null)}const i=async()=>{await y(!0)};return P.subscribe(f=>{o(0,s=f.map(a=>({id:a.id,datatype:"person",title:a.name,popularity:a.popularity,actorDetail:a.actorDetail,knownFor:a.known_for.map(n=>({id:n.id,title:n.title,poster_path:n.backdrop_path,rating:n.vote_average,release_date:n.release_date})),gender:a.gender===1?"Female":"Male",known_for_department:a.known_for_department,backdrop_path:a.profile_path})))}),[s,u,e,r,l,i]}class le extends A{constructor(t){super(),B(this,t,oe,ne,N,{})}}function se(c){let t,o;return t=new le({}),{c(){g(t.$$.fragment)},l(e){d(t.$$.fragment,e)},m(e,s){_(t,e,s),o=!0},i(e){o||(m(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function ie(c){let t,o;return t=new te({props:{$$slots:{default:[se]},$$scope:{ctx:c}}}),{c(){g(t.$$.fragment)},l(e){d(t.$$.fragment,e)},m(e,s){_(t,e,s),o=!0},p(e,[s]){const r={};s&1&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){o||(m(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}class ge extends A{constructor(t){super(),B(this,t,null,ie,N,{})}}export{ge as component};
