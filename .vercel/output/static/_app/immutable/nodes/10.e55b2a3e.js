import{s as ae,N as ue,f as I,a as w,e as O,g as P,h as x,r as J,c as y,d as T,j as E,F as Q,k as X,i as A,x as b,y as q,z as fe,o as ce,b as pe,J as de,u as _e}from"../chunks/scheduler.c4785dc3.js";import{S as re,i as se,b as L,d as N,m as z,a as m,g as oe,t as v,c as le,e as B}from"../chunks/index.42f95a44.js";import{b as me,V as ge,C as $e,R as he,r as ve,f as be,e as Y,M as ke,L as Ce,a as we,P as ye}from"../chunks/Modal.93cf2df3.js";import{w as ie}from"../chunks/index.09294a58.js";import{p as Z}from"../chunks/prioritizeImages.97612009.js";const F=ie([]);let U=ie(1);const R=async o=>{let t;if(U.subscribe(e=>{t=e}),t>5)return;const a={method:"GET",url:`https://api.themoviedb.org/3/trending/movie/${o}?language=en-US&page=${t}`,headers:{accept:"application/json",Authorization:`Bearer ${ge}`}};try{const e=await me.request(a);t===1?F.set(e.data.results):F.update(l=>[...l,...e.data.results]),U.update(l=>l+1)}catch(e){console.error(e)}};function ee(o,t,a){const e=o.slice();return e[13]=t[a],e}function te(o){let t,a;return t=new we({props:{item:o[13]}}),t.$on("itemClick",o[6]),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,l){z(t,e,l),a=!0},p(e,l){const n={};l&2&&(n.item=e[13]),t.$set(n)},i(e){a||(m(t.$$.fragment,e),a=!0)},o(e){v(t.$$.fragment,e),a=!1},d(e){B(t,e)}}}function Te(o){let t,a,e,l=Y(o[1].sort(Z)),n=[];for(let r=0;r<l.length;r+=1)n[r]=te(ee(o,l,r));const f=r=>v(n[r],1,1,()=>{n[r]=null});return a=new ke({props:{selectedItem:o[2],close:o[7]}}),{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=w(),L(a.$$.fragment)},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);t=y(r),N(a.$$.fragment,r)},m(r,i){for(let g=0;g<n.length;g+=1)n[g]&&n[g].m(r,i);A(r,t,i),z(a,r,i),e=!0},p(r,i){if(i&66){l=Y(r[1].sort(Z));let u;for(u=0;u<l.length;u+=1){const c=ee(r,l,u);n[u]?(n[u].p(c,i),m(n[u],1)):(n[u]=te(c),n[u].c(),m(n[u],1),n[u].m(t.parentNode,t))}for(oe(),u=l.length;u<n.length;u+=1)f(u);le()}const g={};i&4&&(g.selectedItem=r[2]),a.$set(g)},i(r){if(!e){for(let i=0;i<l.length;i+=1)m(n[i]);m(a.$$.fragment,r),e=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);v(a.$$.fragment,r),e=!1},d(r){r&&T(t),de(n,r),B(a,r)}}}function ne(o){let t,a;return t=new Ce({props:{onClick:o[4]}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,l){z(t,e,l),a=!0},p:_e,i(e){a||(m(t.$$.fragment,e),a=!0)},o(e){v(t.$$.fragment,e),a=!1},d(e){B(t,e)}}}function Me(o){let t,a,e="Trending Movies",l,n,f,r,i,g="Today",u,c,D,k,$="This Week",_,C,V,M,W,S,j,G,H,K;C=new $e({props:{$$slots:{default:[Te]},$$scope:{ctx:o}}}),M=new he({});let p=o[3]<=5&&ne(o);return G=ue(o[9][0]),{c(){t=I("div"),a=I("h1"),a.textContent=e,l=w(),n=I("div"),f=I("input"),r=w(),i=I("label"),i.textContent=g,u=w(),c=I("input"),D=w(),k=I("label"),k.textContent=$,_=w(),L(C.$$.fragment),V=w(),L(M.$$.fragment),W=w(),p&&p.c(),S=O(),this.h()},l(s){t=P(s,"DIV",{class:!0});var d=x(t);a=P(d,"H1",{"data-svelte-h":!0}),J(a)!=="svelte-1kziwe8"&&(a.textContent=e),l=y(d),n=P(d,"DIV",{style:!0});var h=x(n);f=P(h,"INPUT",{type:!0,id:!0}),r=y(h),i=P(h,"LABEL",{for:!0,"data-svelte-h":!0}),J(i)!=="svelte-1aigvqd"&&(i.textContent=g),u=y(h),c=P(h,"INPUT",{type:!0,id:!0}),D=y(h),k=P(h,"LABEL",{for:!0,"data-svelte-h":!0}),J(k)!=="svelte-njzupu"&&(k.textContent=$),h.forEach(T),d.forEach(T),_=y(s),N(C.$$.fragment,s),V=y(s),N(M.$$.fragment,s),W=y(s),p&&p.l(s),S=O(),this.h()},h(){E(f,"type","radio"),f.__value="day",Q(f,f.__value),E(f,"id","day"),E(i,"for","day"),E(c,"type","radio"),c.__value="week",Q(c,c.__value),E(c,"id","week"),E(k,"for","week"),X(n,"display","flex"),X(n,"gap","20px"),E(t,"class","page-header-container"),G.p(f,c)},m(s,d){A(s,t,d),b(t,a),b(t,l),b(t,n),b(n,f),f.checked=f.__value===o[0],b(n,r),b(n,i),b(n,u),b(n,c),c.checked=c.__value===o[0],b(n,D),b(n,k),A(s,_,d),z(C,s,d),A(s,V,d),z(M,s,d),A(s,W,d),p&&p.m(s,d),A(s,S,d),j=!0,H||(K=[q(f,"change",o[8]),q(f,"change",o[5]),q(c,"change",o[10]),q(c,"change",o[5])],H=!0)},p(s,[d]){d&1&&(f.checked=f.__value===s[0]),d&1&&(c.checked=c.__value===s[0]);const h={};d&65542&&(h.$$scope={dirty:d,ctx:s}),C.$set(h),s[3]<=5?p?(p.p(s,d),d&8&&m(p,1)):(p=ne(s),p.c(),m(p,1),p.m(S.parentNode,S)):p&&(oe(),v(p,1,1,()=>{p=null}),le())},i(s){j||(m(C.$$.fragment,s),m(M.$$.fragment,s),m(p),j=!0)},o(s){v(C.$$.fragment,s),v(M.$$.fragment,s),v(p),j=!1},d(s){s&&(T(t),T(_),T(V),T(W),T(S)),B(C,s),B(M,s),p&&p.d(s),G.r(),H=!1,fe(K)}}}function Ie(o,t,a){let e="day",l=[],n=null,f=1;F.subscribe($=>{}),U.subscribe($=>{a(3,f=$)});const r=()=>{R(e)};ce(()=>{U.set(1),R(e)}),pe(()=>{R(e)}),F.subscribe($=>{a(1,l=$.map(_=>({title:_.title,id:_.id,datatype:"movie",genre_ids:_.genre_ids,rating:_.vote_average,popularity:ve(_.popularity),backdrop_path:_.poster_path,overview:_.overview,release_date:be(_.release_date),credits:_.id})))});const i=$=>{a(0,e=$.target.value),console.log("trendingTimeWindow:",e)};function g($){a(2,n=$.detail.item)}function u(){a(2,n=null)}const c=[[]];function D(){e=this.__value,a(0,e)}function k(){e=this.__value,a(0,e)}return o.$$.update=()=>{o.$$.dirty&1&&e&&(U.set(1),R(e))},[e,l,n,f,r,i,g,u,D,c,k]}class Pe extends re{constructor(t){super(),se(this,t,Ie,Me,ae,{})}}function Ee(o){let t,a;return t=new Pe({}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,l){z(t,e,l),a=!0},i(e){a||(m(t.$$.fragment,e),a=!0)},o(e){v(t.$$.fragment,e),a=!1},d(e){B(t,e)}}}function Le(o){let t,a;return t=new ye({props:{$$slots:{default:[Ee]},$$scope:{ctx:o}}}),{c(){L(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,l){z(t,e,l),a=!0},p(e,[l]){const n={};l&1&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){a||(m(t.$$.fragment,e),a=!0)},o(e){v(t.$$.fragment,e),a=!1},d(e){B(t,e)}}}class De extends re{constructor(t){super(),se(this,t,null,Le,ae,{})}}export{De as component};
