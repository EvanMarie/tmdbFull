import{b as p,V as l}from"./Modal.6c76a5fc.js";import{w as n}from"./index.09294a58.js";const u=n([]);let i=1;const m=n(1),b=n([]);let h=n(1);const f=n(1),P=async(o=!1)=>{let r;if(h.subscribe(e=>{r=e}),!o&&r>1)return;let t;for(let e=0;e<3;e++){const c={method:"GET",url:"https://api.themoviedb.org/3/person/popular?language=en-US&page="+r,headers:{accept:"application/json",Authorization:`Bearer ${l}`}};try{t=await p.request(c);const a=await Promise.all(t.data.results.map(async s=>{const g=await d(s.id);return{...s,actorDetail:g}}));b.update(s=>[...s,...a]),f.set(t.data.total_pages),h.update(s=>s+1)}catch(a){console.error(a)}if(r>=t.data.total_pages)break}},S=async(o,r=!1)=>{r&&(i=1);const t={method:"GET",url:`https://api.themoviedb.org/3/search/person?language=en-US&query=${o}&page=${i}`,headers:{accept:"application/json",Authorization:`Bearer ${l}`}};try{const e=await p.request(t),c=await Promise.all(e.data.results.map(async a=>{const s=await d(a.id);return{...a,actorDetail:s}}));i===1?(u.set(c),m.set(e.data.total_pages)):u.update(a=>[...a,...c]),i++}catch(e){console.error(e)}},d=async o=>{const t={method:"GET",url:`https://api.themoviedb.org/3/person/${o}`,headers:{accept:"application/json",Authorization:`Bearer ${l}`}};try{return(await p.request(t)).data}catch(e){return console.error(e),null}};export{b as a,m as b,S as c,d,P as g,h as p,u as s,f as t};
