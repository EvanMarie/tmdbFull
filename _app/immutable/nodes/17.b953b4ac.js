import{s as re,N as fe,f as S,a as C,e as Q,g as P,h as X,r as G,c as k,d as y,j as V,F as Y,k as Z,i as B,x as b,y as W,z as ce,E as pe,o as de,J as _e,u as me}from"../chunks/scheduler.c4785dc3.js";import{S as se,i as oe,b as I,d as E,m as L,a as g,g as le,t as v,c as ie,e as N}from"../chunks/index.42f95a44.js";import{b as ge,V as $e,C as he,R as ve,r as be,f as Te,e as x,M as Ce,L as ke,a as ye,P as we}from"../chunks/Modal.93cf2df3.js";import{w as K}from"../chunks/index.09294a58.js";import{p as ee}from"../chunks/prioritizeimages.97612009.js";const J=K([]);let D=K(1),ue=K(1);const H=async o=>{let t;if(D.subscribe(e=>{t=e}),t>5)return;const a={method:"GET",url:`https://api.themoviedb.org/3/trending/tv/${o}?language=en-US&page=${t}`,headers:{accept:"application/json",Authorization:`Bearer ${$e}`}};try{const e=await ge.request(a);ue.set(e.data.total_pages),t===1?J.set(e.data.results):J.update(l=>[...l,...e.data.results]),D.update(l=>l+1)}catch(e){console.error(e)}};function te(o,t,a){const e=o.slice();return e[14]=t[a],e}function ne(o){let t,a;return t=new ye({props:{item:o[14]}}),t.$on("itemClick",o[7]),{c(){I(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){L(t,e,l),a=!0},p(e,l){const n={};l&4&&(n.item=e[14]),t.$set(n)},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){v(t.$$.fragment,e),a=!1},d(e){N(t,e)}}}function Se(o){let t,a,e,l=x(o[2].sort(ee)),n=[];for(let r=0;r<l.length;r+=1)n[r]=ne(te(o,l,r));const u=r=>v(n[r],1,1,()=>{n[r]=null});return a=new Ce({props:{selectedItem:o[3],close:o[8]}}),{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=C(),I(a.$$.fragment)},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);t=k(r),E(a.$$.fragment,r)},m(r,i){for(let $=0;$<n.length;$+=1)n[$]&&n[$].m(r,i);B(r,t,i),L(a,r,i),e=!0},p(r,i){if(i&132){l=x(r[2].sort(ee));let f;for(f=0;f<l.length;f+=1){const c=te(r,l,f);n[f]?(n[f].p(c,i),g(n[f],1)):(n[f]=ne(c),n[f].c(),g(n[f],1),n[f].m(t.parentNode,t))}for(le(),f=l.length;f<n.length;f+=1)u(f);ie()}const $={};i&8&&($.selectedItem=r[3]),a.$set($)},i(r){if(!e){for(let i=0;i<l.length;i+=1)g(n[i]);g(a.$$.fragment,r),e=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);v(a.$$.fragment,r),e=!1},d(r){r&&y(t),_e(n,r),N(a,r)}}}function ae(o){let t,a;return t=new ke({props:{onClick:o[5]}}),{c(){I(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){L(t,e,l),a=!0},p:me,i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){v(t.$$.fragment,e),a=!1},d(e){N(t,e)}}}function Pe(o){let t,a,e="Trending TV",l,n,u,r,i,$="Today",f,c,A,T,j="This Week",M,_,m,w,q,z,U,R,F,O;_=new he({props:{$$slots:{default:[Se]},$$scope:{ctx:o}}}),w=new ve({});let p=o[4]<o[1]&&ae(o);return R=fe(o[11][0]),{c(){t=S("div"),a=S("h1"),a.textContent=e,l=C(),n=S("div"),u=S("input"),r=C(),i=S("label"),i.textContent=$,f=C(),c=S("input"),A=C(),T=S("label"),T.textContent=j,M=C(),I(_.$$.fragment),m=C(),I(w.$$.fragment),q=C(),p&&p.c(),z=Q(),this.h()},l(s){t=P(s,"DIV",{class:!0});var d=X(t);a=P(d,"H1",{"data-svelte-h":!0}),G(a)!=="svelte-rs3dfh"&&(a.textContent=e),l=k(d),n=P(d,"DIV",{style:!0});var h=X(n);u=P(h,"INPUT",{type:!0,id:!0}),r=k(h),i=P(h,"LABEL",{for:!0,"data-svelte-h":!0}),G(i)!=="svelte-1aigvqd"&&(i.textContent=$),f=k(h),c=P(h,"INPUT",{type:!0,id:!0}),A=k(h),T=P(h,"LABEL",{for:!0,"data-svelte-h":!0}),G(T)!=="svelte-njzupu"&&(T.textContent=j),h.forEach(y),d.forEach(y),M=k(s),E(_.$$.fragment,s),m=k(s),E(w.$$.fragment,s),q=k(s),p&&p.l(s),z=Q(),this.h()},h(){V(u,"type","radio"),u.__value="day",Y(u,u.__value),V(u,"id","day"),V(i,"for","day"),V(c,"type","radio"),c.__value="week",Y(c,c.__value),V(c,"id","week"),V(T,"for","week"),Z(n,"display","flex"),Z(n,"gap","20px"),V(t,"class","page-header-container"),R.p(u,c)},m(s,d){B(s,t,d),b(t,a),b(t,l),b(t,n),b(n,u),u.checked=u.__value===o[0],b(n,r),b(n,i),b(n,f),b(n,c),c.checked=c.__value===o[0],b(n,A),b(n,T),B(s,M,d),L(_,s,d),B(s,m,d),L(w,s,d),B(s,q,d),p&&p.m(s,d),B(s,z,d),U=!0,F||(O=[W(u,"change",o[10]),W(u,"change",o[6]),W(c,"change",o[12]),W(c,"change",o[6])],F=!0)},p(s,[d]){d&1&&(u.checked=u.__value===s[0]),d&1&&(c.checked=c.__value===s[0]);const h={};d&131084&&(h.$$scope={dirty:d,ctx:s}),_.$set(h),s[4]<s[1]?p?(p.p(s,d),d&18&&g(p,1)):(p=ae(s),p.c(),g(p,1),p.m(z.parentNode,z)):p&&(le(),v(p,1,1,()=>{p=null}),ie())},i(s){U||(g(_.$$.fragment,s),g(w.$$.fragment,s),g(p),U=!0)},o(s){v(_.$$.fragment,s),v(w.$$.fragment,s),v(p),U=!1},d(s){s&&(y(t),y(M),y(m),y(q),y(z)),N(_,s),N(w,s),p&&p.d(s),R.r(),F=!1,ce(O)}}}function Ve(o,t,a){let e;pe(o,D,_=>a(4,e=_));let l=0,n="day",u=!1,r=[],i=null;de(()=>{D.set(1),H(n),a(9,u=!0)}),J.subscribe(_=>{a(2,r=_.map(m=>({title:m.name,id:m.id,datatype:"tv",genre_ids:m.genre_ids,rating:m.vote_average,popularity:be(m.popularity),backdrop_path:m.poster_path,overview:m.overview,release_date:Te(m.first_air_date),credits:m.id})))}),ue.subscribe(_=>{a(1,l=_)});const $=()=>{H(n)},f=_=>{a(0,n=_.target.value)};function c(_){a(3,i=_.detail.item)}function A(){a(3,i=null)}const T=[[]];function j(){n=this.__value,a(0,n)}function M(){n=this.__value,a(0,n)}return o.$$.update=()=>{o.$$.dirty&513&&n&&u&&(D.set(1),H(n))},[n,l,r,i,e,$,f,c,A,u,j,T,M]}class Ie extends se{constructor(t){super(),oe(this,t,Ve,Pe,re,{})}}function Ee(o){let t,a;return t=new Ie({}),{c(){I(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){L(t,e,l),a=!0},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){v(t.$$.fragment,e),a=!1},d(e){N(t,e)}}}function Le(o){let t,a;return t=new we({props:{$$slots:{default:[Ee]},$$scope:{ctx:o}}}),{c(){I(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){L(t,e,l),a=!0},p(e,[l]){const n={};l&1&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){v(t.$$.fragment,e),a=!1},d(e){N(t,e)}}}class De extends se{constructor(t){super(),oe(this,t,null,Le,re,{})}}export{De as component};
