import{I as E,s as ee,f as T,a as P,g as R,h as F,r as Q,c as S,d as v,j as J,i as z,x as N,F as U,y as B,z as se,o as le,e as V,J as ie,u as ce}from"../chunks/scheduler.c4785dc3.js";import{S as te,i as ae,b as k,d as w,m as I,a as _,g as O,t as $,c as Y,e as C}from"../chunks/index.42f95a44.js";import{b as ue,R as fe,r as pe,f as me,C as _e,M as de,e as Z,L as $e,a as he,P as ge}from"../chunks/Modal.93cf2df3.js";import{w as W}from"../chunks/index.09294a58.js";import{d as be}from"../chunks/popularpeople.38d25204.js";import{p as q}from"../chunks/prioritizeimages.97612009.js";const G=W([]),A=W(1),re=W(1),ne=W([]),oe=W([]),L=async(i,e=!1)=>{const n="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzMWViMzMwODNjYjZiNWYzYzllNWMzYjk4MDI0N2ViOSIsInN1YiI6IjYzOTNlMGRmYTBmMWEyMDA4NzM3ZTFmOSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.t05hQyBl-PzrZPdgqQawnxWb0AIR40aBagYNIywe6ao",t=e?E(A)+1:1,a={method:"GET",url:`https://api.themoviedb.org/3/search/multi?query=${encodeURIComponent(i)}&language=en-US&page=${t}`,headers:{accept:"application/json",Authorization:`Bearer ${n}`}};try{const o=await ue.request(a);let r=o.data.results;const u=await Promise.all(r.map(async d=>{if(d.media_type==="person"){const h=await be(d.id);return{...d,actorDetail:h}}return d}));r=e?[...E(G),...u]:u,G.set(r),A.set(o.data.page),re.set(o.data.total_pages);const s=r.filter(d=>d.media_type==="movie"),g=r.filter(d=>d.media_type==="person");ne.set(s),oe.set(g)}catch(o){console.error(o)}};function K(i,e,n){const t=i.slice();return t[12]=e[n],t}function X(i){let e,n,t,a;return e=new _e({props:{$$slots:{default:[ye]},$$scope:{ctx:i}}}),t=new de({props:{selectedItem:i[4],close:i[9]}}),{c(){k(e.$$.fragment),n=P(),k(t.$$.fragment)},l(o){w(e.$$.fragment,o),n=S(o),w(t.$$.fragment,o)},m(o,r){I(e,o,r),z(o,n,r),I(t,o,r),a=!0},p(o,r){const u={};r&32769&&(u.$$scope={dirty:r,ctx:o}),e.$set(u);const s={};r&16&&(s.selectedItem=o[4]),t.$set(s)},i(o){a||(_(e.$$.fragment,o),_(t.$$.fragment,o),a=!0)},o(o){$(e.$$.fragment,o),$(t.$$.fragment,o),a=!1},d(o){o&&v(n),C(e,o),C(t,o)}}}function H(i){let e,n;function t(){return i[11](i[12])}return e=new he({props:{item:i[12]}}),e.$on("itemClick",t),{c(){k(e.$$.fragment)},l(a){w(e.$$.fragment,a)},m(a,o){I(e,a,o),n=!0},p(a,o){i=a;const r={};o&1&&(r.item=i[12]),e.$set(r)},i(a){n||(_(e.$$.fragment,a),n=!0)},o(a){$(e.$$.fragment,a),n=!1},d(a){C(e,a)}}}function ye(i){let e,n,t=Z(i[0].sort(q)),a=[];for(let r=0;r<t.length;r+=1)a[r]=H(K(i,t,r));const o=r=>$(a[r],1,1,()=>{a[r]=null});return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=V()},l(r){for(let u=0;u<a.length;u+=1)a[u].l(r);e=V()},m(r,u){for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(r,u);z(r,e,u),n=!0},p(r,u){if(u&257){t=Z(r[0].sort(q));let s;for(s=0;s<t.length;s+=1){const g=K(r,t,s);a[s]?(a[s].p(g,u),_(a[s],1)):(a[s]=H(g),a[s].c(),_(a[s],1),a[s].m(e.parentNode,e))}for(O(),s=t.length;s<a.length;s+=1)o(s);Y()}},i(r){if(!n){for(let u=0;u<t.length;u+=1)_(a[u]);n=!0}},o(r){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)$(a[u]);n=!1},d(r){r&&v(e),ie(a,r)}}}function x(i){let e,n;return e=new $e({props:{onClick:i[7]}}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,a){I(e,t,a),n=!0},p:ce,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function ve(i){let e,n,t="Search All",a,o,r,u,s,g="go",d,h,y,b,D,m,M,l=i[0].length>0&&X(i),f=i[2]<=i[3]&&x(i);return b=new fe({}),{c(){e=T("div"),n=T("p"),n.textContent=t,a=P(),o=T("div"),r=T("input"),u=P(),s=T("button"),s.textContent=g,d=P(),l&&l.c(),h=P(),f&&f.c(),y=P(),k(b.$$.fragment),this.h()},l(c){e=R(c,"DIV",{class:!0});var p=F(e);n=R(p,"P",{"data-svelte-h":!0}),Q(n)!=="svelte-11pbtr1"&&(n.textContent=t),a=S(p),o=R(p,"DIV",{class:!0});var j=F(o);r=R(j,"INPUT",{type:!0,placeholder:!0}),u=S(j),s=R(j,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1mltr76"&&(s.textContent=g),j.forEach(v),p.forEach(v),d=S(c),l&&l.l(c),h=S(c),f&&f.l(c),y=S(c),w(b.$$.fragment,c),this.h()},h(){J(r,"type","text"),J(r,"placeholder","Search entire datab..."),J(s,"class","button-styles"),J(o,"class","input-and-button"),J(e,"class","page-header-container")},m(c,p){z(c,e,p),N(e,n),N(e,a),N(e,o),N(o,r),U(r,i[1]),N(o,u),N(o,s),z(c,d,p),l&&l.m(c,p),z(c,h,p),f&&f.m(c,p),z(c,y,p),I(b,c,p),D=!0,m||(M=[B(r,"input",i[10]),B(r,"keydown",i[6]),B(s,"click",i[5])],m=!0)},p(c,[p]){p&2&&r.value!==c[1]&&U(r,c[1]),c[0].length>0?l?(l.p(c,p),p&1&&_(l,1)):(l=X(c),l.c(),_(l,1),l.m(h.parentNode,h)):l&&(O(),$(l,1,1,()=>{l=null}),Y()),c[2]<=c[3]?f?(f.p(c,p),p&12&&_(f,1)):(f=x(c),f.c(),_(f,1),f.m(y.parentNode,y)):f&&(O(),$(f,1,1,()=>{f=null}),Y())},i(c){D||(_(l),_(f),_(b.$$.fragment,c),D=!0)},o(c){$(l),$(f),$(b.$$.fragment,c),D=!1},d(c){c&&(v(e),v(d),v(h),v(y)),l&&l.d(c),f&&f.d(c),C(b,c),m=!1,se(M)}}}function ke(i,e,n){let t=[],a="Tolkien",o=1,r=1,u=null;ne.subscribe(m=>{const M=m.map(l=>({id:l.id,title:l.title,rating:l.vote_average,popularity:pe(l.popularity),backdrop_path:l.poster_path,overview:l.overview,release_date:me(l.release_date),datatype:"movie"}));n(0,t=[...M,...t])}),oe.subscribe(m=>{const M=m.map(l=>({id:l.id,datatype:"person",title:l.name,popularity:l.popularity,actorDetail:l.actorDetail,knownFor:l.known_for.map(f=>({id:f.id,title:f.title,poster_path:f.backdrop_path,rating:f.vote_average,release_date:f.release_date})),gender:l.gender===1?"Female":"Male",known_for_department:l.known_for_department,backdrop_path:l.profile_path}));n(0,t=[...M,...t])}),console.log(t),A.subscribe(m=>n(2,o=m)),re.subscribe(m=>n(3,r=m));const s=()=>{n(0,t=[]),L(a)},g=m=>{m.key==="Enter"&&s()},d=()=>{L(a,!0)},h=m=>{n(4,u=m)},y=()=>{n(4,u=null)};le(()=>{s()});function b(){a=this.value,n(1,a)}return[t,a,o,r,u,s,g,d,h,y,b,m=>h(m)]}class we extends te{constructor(e){super(),ae(this,e,ke,ve,ee,{})}}function Ie(i){let e,n;return e=new we({}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,a){I(e,t,a),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Ce(i){let e,n;return e=new ge({props:{$$slots:{default:[Ie]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,a){I(e,t,a),n=!0},p(t,[a]){const o={};a&1&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}class Te extends te{constructor(e){super(),ae(this,e,null,Ce,ee,{})}}export{Te as component};
