import{s as J,f as N,l as U,g as w,h as z,m as H,d,F as P,G as ne,i as I,x as S,H as W,y as Y,n as X,u as T,J as x,z as re,M as ae,o as B,L as se,a as y,e as A,r as le,c as E,j as L,I as V}from"../chunks/scheduler.c4785dc3.js";import{S as j,i as D,b as M,d as C,m as G,a as h,g as ee,t as $,c as te,e as b}from"../chunks/index.42f95a44.js";import{e as O,b as oe,C as ie,R as ce,r as fe,f as ue,M as me,L as _e,a as pe,P as ge}from"../chunks/Modal.93cf2df3.js";import{b as he,c as de,d as $e}from"../chunks/movies.689aa781.js";import{p as Z}from"../chunks/prioritizeImages.97612009.js";function Q(i,e,n){const t=i.slice();return t[7]=e[n],t}function R(i){let e,n=i[7].name+"",t,o;return{c(){e=N("option"),t=U(n),this.h()},l(s){e=w(s,"OPTION",{});var f=z(e);t=H(f,n),f.forEach(d),this.h()},h(){e.__value=o=i[7].id,P(e,e.__value)},m(s,f){I(s,e,f),S(e,t)},p(s,f){f&2&&n!==(n=s[7].name+"")&&X(t,n),f&2&&o!==(o=s[7].id)&&(e.__value=o,P(e,e.__value))},d(s){s&&d(e)}}}function ve(i){let e,n,t,o,s,f=O(i[1]),r=[];for(let a=0;a<f.length;a+=1)r[a]=R(Q(i,f,a));return{c(){e=N("select"),n=N("option"),t=U(i[2]);for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=w(a,"SELECT",{});var m=z(e);n=w(m,"OPTION",{});var l=z(n);t=H(l,i[2]),l.forEach(d);for(let _=0;_<r.length;_+=1)r[_].l(m);m.forEach(d),this.h()},h(){n.__value="",P(n,n.__value),i[0]===void 0&&ne(()=>i[4].call(e))},m(a,m){I(a,e,m),S(e,n),S(n,t);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);W(e,i[0],!0),o||(s=[Y(e,"change",i[4]),Y(e,"change",i[3])],o=!0)},p(a,[m]){if(m&4&&X(t,a[2]),m&2){f=O(a[1]);let l;for(l=0;l<f.length;l+=1){const _=Q(a,f,l);r[l]?r[l].p(_,m):(r[l]=R(_),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=f.length}m&3&&W(e,a[0])},i:T,o:T,d(a){a&&d(e),x(r,a),o=!1,re(s)}}}function Ie(i,e,n){let{selectedGenre:t=10402}=e,o=[],s="Select a genre";const f=ae(),r=l=>{n(0,t=parseInt(l.target.value,10)),f("genreselect",{genreId:t})},a=l=>{const _=o.find(g=>g.id===l);return _?_.name:"Select a genre"};B(async()=>{const _={method:"GET",url:"https://api.themoviedb.org/3/genre/movie/list?language=en-US",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzMWViMzMwODNjYjZiNWYzYzllNWMzYjk4MDI0N2ViOSIsInN1YiI6IjYzOTNlMGRmYTBmMWEyMDA4NzM3ZTFmOSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.t05hQyBl-PzrZPdgqQawnxWb0AIR40aBagYNIywe6ao"}};try{const g=await oe.request(_);n(1,o=g.data.genres),n(2,s=a(t))}catch(g){console.error(g)}});function m(){t=se(this),n(0,t),n(1,o)}return i.$$set=l=>{"selectedGenre"in l&&n(0,t=l.selectedGenre)},[t,o,s,r,m]}class Me extends j{constructor(e){super(),D(this,e,Ie,ve,J,{selectedGenre:0})}}function q(i,e,n){const t=i.slice();return t[13]=e[n],t}function F(i){let e,n;return e=new pe({props:{item:i[13]}}),e.$on("itemClick",i[5]),{c(){M(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){G(e,t,o),n=!0},p(t,o){const s={};o&2&&(s.item=t[13]),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function Ce(i){let e,n,t,o=O(i[1].sort(Z)),s=[];for(let r=0;r<o.length;r+=1)s[r]=F(q(i,o,r));const f=r=>$(s[r],1,1,()=>{s[r]=null});return n=new me({props:{selectedItem:i[2],close:i[6]}}),{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=y(),M(n.$$.fragment)},l(r){for(let a=0;a<s.length;a+=1)s[a].l(r);e=E(r),C(n.$$.fragment,r)},m(r,a){for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(r,a);I(r,e,a),G(n,r,a),t=!0},p(r,a){if(a&34){o=O(r[1].sort(Z));let l;for(l=0;l<o.length;l+=1){const _=q(r,o,l);s[l]?(s[l].p(_,a),h(s[l],1)):(s[l]=F(_),s[l].c(),h(s[l],1),s[l].m(e.parentNode,e))}for(ee(),l=o.length;l<s.length;l+=1)f(l);te()}const m={};a&4&&(m.selectedItem=r[2]),n.$set(m)},i(r){if(!t){for(let a=0;a<o.length;a+=1)h(s[a]);h(n.$$.fragment,r),t=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)$(s[a]);$(n.$$.fragment,r),t=!1},d(r){r&&d(e),x(s,r),b(n,r)}}}function K(i){let e,n;return e=new _e({props:{onClick:i[7]}}),{c(){M(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){G(e,t,o),n=!0},p:T,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function Ge(i){let e,n,t="Movie Genres",o,s,f,r,a,m,l,_,g,v;f=new Me({}),f.$on("genreselect",i[3]),a=new ie({props:{$$slots:{default:[Ce]},$$scope:{ctx:i}}}),l=new ce({});let u=i[0]&&K(i);return{c(){e=N("div"),n=N("p"),n.textContent=t,o=y(),s=N("div"),M(f.$$.fragment),r=y(),M(a.$$.fragment),m=y(),M(l.$$.fragment),_=y(),u&&u.c(),g=A(),this.h()},l(c){e=w(c,"DIV",{class:!0});var p=z(e);n=w(p,"P",{"data-svelte-h":!0}),le(n)!=="svelte-14r827w"&&(n.textContent=t),o=E(p),s=w(p,"DIV",{class:!0});var k=z(s);C(f.$$.fragment,k),k.forEach(d),p.forEach(d),r=E(c),C(a.$$.fragment,c),m=E(c),C(l.$$.fragment,c),_=E(c),u&&u.l(c),g=A(),this.h()},h(){L(s,"class","input-and-button"),L(e,"class","page-header-container")},m(c,p){I(c,e,p),S(e,n),S(e,o),S(e,s),G(f,s,null),I(c,r,p),G(a,c,p),I(c,m,p),G(l,c,p),I(c,_,p),u&&u.m(c,p),I(c,g,p),v=!0},p(c,[p]){const k={};p&65542&&(k.$$scope={dirty:p,ctx:c}),a.$set(k),c[0]?u?(u.p(c,p),p&1&&h(u,1)):(u=K(c),u.c(),h(u,1),u.m(g.parentNode,g)):u&&(ee(),$(u,1,1,()=>{u=null}),te())},i(c){v||(h(f.$$.fragment,c),h(a.$$.fragment,c),h(l.$$.fragment,c),h(u),v=!0)},o(c){$(f.$$.fragment,c),$(a.$$.fragment,c),$(l.$$.fragment,c),$(u),v=!1},d(c){c&&(d(e),d(r),d(m),d(_),d(g)),b(f),b(a,c),b(l,c),u&&u.d(c)}}}function be(i,e,n){let t=!0;B(()=>{a()});let o=[],s=1,f=10402;B(()=>{a()});const r=v=>{n(1,o=[]),s=1,f=v.detail.genreId,n(0,t=!0),a()},a=async()=>{const v=await he(f,s);n(1,o=[...o,...v.map(u=>({title:u.title,id:u.id,datatype:"movie",genre_ids:u.genre_ids,rating:u.vote_average,popularity:fe(u.popularity),backdrop_path:u.poster_path,overview:u.overview,release_date:ue(u.release_date),credits:u.id}))]),v.length<60&&n(0,t=!1),s+=3};function m(v){n(2,_=v.detail.item)}function l(){n(2,_=null)}let _=null;const g=()=>a();return n(0,t=V(de)<=V($e)),[t,o,_,r,a,m,l,g]}class Ne extends j{constructor(e){super(),D(this,e,be,Ge,J,{})}}function we(i){let e,n;return e=new Ne({}),{c(){M(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){G(e,t,o),n=!0},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function Se(i){let e,n;return e=new ge({props:{$$slots:{default:[we]},$$scope:{ctx:i}}}),{c(){M(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){G(e,t,o),n=!0},p(t,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}class Pe extends j{constructor(e){super(),D(this,e,null,Se,J,{})}}export{Pe as component};
